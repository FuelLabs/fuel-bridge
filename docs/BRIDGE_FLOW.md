# Bridge flow

This document attempts to be a high level overview of how Fuel 's token bridge is operating currently.

## Concepts

To understand this document, it is useful to first get a grasp of a few concepts that will be referred to in the rest of this description.

- Fuel block: a block of the Fuel blockchain, generated by a validator set. It contains transactions, but also messages, outgoing and relayed.
- Outgoing messages: Messages that are generated in the L1 blockchain that must be sent to L2 entities.
- Relayed messages: Messages that are generated in the L2 (Fuel) blockchain that must be sent to L1 entities.
- Fuel epoch: A group of Fuel blocks, packed toghether and identifier by the last block of the epoch.
- Fuel validators: Entities that validate Fuel blocks and keep the ledger going.
- L1 Commits: Transactions on the L1 that start the finalization process of a Fuel epoch.
- Finality: State of commits by which the commit cannot be changed, it is considered honest and immutable - final. When an epoch is committed, a clock starts. If the commit is correct, time will pass and the epoch will be final - it cannot be reverted or changed. If the commit is not correct, a nhonest party can challenge it.
- Block comitter: entity in charge of listening to finished epochs from the Fuel Blockchain and comitting these epochs to the `FuelChainState` contract.
- `FuelChainState` contract: L1 Smart contract that holds epoch information.
- `FuelMessagePortal` contract: L1 Smart contract that is able to validate relay messages from Fuel Blocks that have been committed to the state contract, and relays those messages to the corresponding entities in L1
- Layer 1 Bridge smart contract: L1 smart contract that holds L1 tokens. Upon user deposits, it generates an message for the L2 counterpart to mint the associated L2 token.
- Layer 2 Bridge smart contract: L2 (Fuel) smart contract that mints L2 tokens when receiving messsages from the L1 counterpart. Similarly, burns L2 tokens and generates a withdrawal message for the L1 contract to release L1 tokens to their rightful owner.
- Deposit: User action by which some L1 tokens are locked in the L1 bridge smart contracts, minting the same amount in the L2 chain.
- Withdrawal: User action by which some L2 tokens are burnt in the L2 bridge smart contracts, releasing the burnt amount in the L1 chain.

## Description

### Block committing

![Block Committing](block_committing.png)

### L1 Deposit

![L1 Deposit](l1_deposit.png)

### L2 (Fuel) Withdrawal

![L2 Withdrawal](l2_withdrawal.png)